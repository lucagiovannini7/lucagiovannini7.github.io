<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Luca Giovannini</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div id="map"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
  <script>
var map = L.map('map').setView([37.8, -96], 4);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

var cities = ["Berlin", "Paris", "London", "New York"];

//"Berlin","Cologne","Duesseldorf","Essen","Bonn","Aachen","Munster","Trier","Mainz","Wiesbaden","Frankfurt","Darmstadt",
//"Hamburg","Werningerode","Wittenberg","Potsdam","Brandenburg an der Havel",

//"Amsterdam",
// "London","Coventry","Warwick","Leamington Spa","Birmingham","Manchester","Edinburgh","Glasgow","Bath",
//"Salisbury", "Oxford","Cambridge",
    
// "Paris","Versailles","Marseille","Nice","Oranges","Pont-du-Gard","Avignon","Chambery","Annecy","Argeles-sur-mer",

// "Barcelona","Valencia","Malaga","Granada","Sevilla","Cordoba","Toledo","Madrid","Zaragoza",

//"Lubiana","Nova Gorica","Portoroz","Rijeka","Balaton","Budapest","Oradea","Sibiu","Bran, Brasov","Sinaia",

//"Torino","Ivrea","Saluzzo","Aosta","Genova","San Bartolomeo al mare","Sestri Levante","Cinque Terre","Milano","Pavia"



var addMarkers = function() {
    cities.forEach(function(city) {
        fetch(`https://nominatim.openstreetmap.org/search.php?q=${encodeURIComponent(city)}&format=json`)
        .then(function(response) {
            return response.json();
        })
        .then(function(data) {
            if (data.length == 0) {
                console.log(`Error: no results found for ${city}`);
                return;
            }

            var r = data[0];
            L.marker([r.lat, r.lng], {icon: L.icon({
              iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
              shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
              iconSize: [25, 41],
              iconAnchor: [12, 41],
              popupAnchor: [1, -34],
              shadowSize: [41, 41]
            })}).addTo(map).bindPopup(r.display_name);
        });
    });
};

addMarkers();
  </script>
</body>
</html>